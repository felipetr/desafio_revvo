const loginForm=document.getElementById("loginForm");function showFirstModal(){document.getElementById("modalCaller").click()}null===localStorage.getItem("modalShowed")&&(showFirstModal(),localStorage.setItem("modalShowed",!0)),loginForm.addEventListener("submit",function(e){e.preventDefault(),logarSe(document.getElementById("email").value,document.getElementById("password").value,document.getElementById("rememberMe").checked)});const logoutBtn=document.getElementById("logoutBtn");function logarSe(t,n,s){document.getElementById("loginMessage").style.display="none";const r=new XMLHttpRequest;r.open("POST",baseUrl+"includes/logarSe.php",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var e,o;200===r.status?(e=JSON.parse(r.responseText)).success?(console.log("Login efetuado com sucesso!"),s&&(o=encryptCredentials(t,n),localStorage.setItem("loginCredentials",o)),window.location.href=window.location.href):(console.error("Erro no login:",e.message),document.getElementById("loginMessage").style.display="block",document.getElementById("loginMessage").innerHTML="Erro no login: "+e.message):(console.error("Erro na requisição AJAX:",r.statusText),document.getElementById("loginMessage").style.display="block",document.getElementById("loginMessage").innerHTML="Erro no servidor. Tente novamente mais tarde.")},r.onerror=function(){console.error("Erro na requisição AJAX:",r.statusText),document.getElementById("loginMessage").innerHTML="Erro no servidor. Tente novamente mais tarde."},r.send(`email=${t}&password=`+n)}function encryptCredentials(e,o){e=btoa(e),o=btoa(o);return e.split("").reverse().join("")+":"+o.split("").reverse().join("")}function decryptCredentials(e){var[e,o]=e.split(":"),e=e.split("").reverse().join(""),o=o.split("").reverse().join("");return{email:atob(e),password:atob(o)}}logoutBtn&&logoutBtn.addEventListener("click",function(e){e.preventDefault();const o=new XMLHttpRequest;o.open("POST",baseUrl+"includes/logout.php",!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){var e;200===o.status?(e=JSON.parse(o.responseText)).success?(console.log("Logout efetuado com sucesso!"),localStorage.removeItem("loginCredentials"),window.location.href=window.location.href):console.error("Erro no logout:",e.message):console.error("Erro na requisição AJAX:",o.statusText)},o.onerror=function(){console.error("Erro na requisição AJAX:",o.statusText)};e=JSON.stringify({});o.send(e)});